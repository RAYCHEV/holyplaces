<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è - –°–≤–µ—Ç–∏ –º–µ—Å—Ç–∞ –≤ –ë—ä–ª–≥–∞—Ä–∏—è</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        /* –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ —Å—Ç–∏–ª–æ–≤–µ –∑–∞ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∞ */
        .admin-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 20px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .admin-actions {
            display: flex;
            gap: 1rem;
        }

        .data-table {
            width: 100%;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .data-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th {
            background: var(--primary-color);
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
        }

        .data-table td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #eee;
        }

        .data-table tr:hover {
            background: #f9f9f9;
        }

        .data-table input,
        .data-table select,
        .data-table textarea {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .data-table textarea {
            resize: vertical;
            min-height: 60px;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s;
        }

        .btn-edit {
            background: #4CAF50;
            color: white;
        }

        .btn-edit:hover {
            background: #45a049;
        }

        .btn-delete {
            background: #f44336;
            color: white;
        }

        .btn-delete:hover {
            background: #da190b;
        }

        .btn-coords {
            background: #2196F3;
            color: white;
        }

        .btn-coords:hover {
            background: #0b7dda;
        }

        .btn-save {
            background: #4CAF50;
            color: white;
        }

        .btn-cancel {
            background: #9e9e9e;
            color: white;
        }

        /* –ú–æ–¥–∞–ª–µ–Ω –ø—Ä–æ–∑–æ—Ä–µ—Ü */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .close {
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #999;
        }

        .close:hover {
            color: #333;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        #mapModal {
            height: 400px;
            margin: 1rem 0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .coordinates-info {
            background: #f5f5f5;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            font-family: monospace;
        }

        .search-box {
            position: relative;
            margin-bottom: 1rem;
        }

        .search-box input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .data-table {
                overflow-x: auto;
            }
            
            .data-table table {
                min-width: 800px;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="../index.html" class="logo">–°–≤–µ—Ç–∏ –º–µ—Å—Ç–∞ –≤ –ë—ä–ª–≥–∞—Ä–∏—è - –ê–¥–º–∏–Ω</a>
            <ul class="nav-links">
                <li><a href="../index.html">–ù–∞—á–∞–ª–æ</a></li>
                <li><a href="../holyplaces.html">–í—Å–∏—á–∫–∏ —Ö—Ä–∞–º–æ–≤–µ</a></li>
                <li><a href="index.html" class="active">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è</a></li>
            </ul>
        </div>
    </nav>

    <div class="admin-container">
        <div class="admin-header">
            <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–≤–µ—Ç–∏ –º–µ—Å—Ç–∞</h1>
            <div class="admin-actions">
                <button class="btn-primary" onclick="showAddModal()">‚ûï –î–æ–±–∞–≤–∏ –Ω–æ–≤–æ –º—è—Å—Ç–æ</button>
                <button class="btn-secondary" onclick="generateAndDownloadDataJS()">üíæ –ò–∑—Ç–µ–≥–ª–∏ data.js</button>
            </div>
        </div>

        <div class="data-table">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>–ò–º–µ</th>
                        <th>–¢–∏–ø</th>
                        <th>–î–µ–Ω–æ–º–∏–Ω–∞—Ü–∏—è</th>
                        <th>–ì—Ä–∞–¥</th>
                        <th>–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- –¢—É–∫ —â–µ —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞—Ç —Ä–µ–¥–æ–≤–µ—Ç–µ -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª –∑–∞ –¥–æ–±–∞–≤—è–Ω–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">–î–æ–±–∞–≤–∏ –Ω–æ–≤–æ –º—è—Å—Ç–æ</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <form id="placeForm">
                <input type="hidden" id="editIndex" value="-1">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="placeId">ID (—É–Ω–∏–∫–∞–ª–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)*</label>
                        <input type="text" id="placeId" required pattern="[a-z0-9-]+" 
                               title="–°–∞–º–æ –º–∞–ª–∫–∏ –±—É–∫–≤–∏, —á–∏—Å–ª–∞ –∏ —Ç–∏—Ä–µ—Ç–∞">
                    </div>
                    <div class="form-group">
                        <label for="placeName">–ò–º–µ*</label>
                        <input type="text" id="placeName" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="placeType">–¢–∏–ø*</label>
                        <select id="placeType" required>
                            <option value="">–ò–∑–±–µ—Ä–∏ —Ç–∏–ø</option>
                            <option value="—Ü—ä—Ä–∫–≤–∞">–¶—ä—Ä–∫–≤–∞</option>
                            <option value="–∫–∞—Ç–µ–¥—Ä–∞–ª–∞">–ö–∞—Ç–µ–¥—Ä–∞–ª–∞</option>
                            <option value="–º–∞–Ω–∞—Å—Ç–∏—Ä">–ú–∞–Ω–∞—Å—Ç–∏—Ä</option>
                            <option value="–ø–∞—Ä–∞–∫–ª–∏—Å">–ü–∞—Ä–∞–∫–ª–∏—Å</option>
                            <option value="–¥–∂–∞–º–∏—è">–î–∂–∞–º–∏—è</option>
                            <option value="—Å–∏–Ω–∞–≥–æ–≥–∞">–°–∏–Ω–∞–≥–æ–≥–∞</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="placeDenomination">–î–µ–Ω–æ–º–∏–Ω–∞—Ü–∏—è*</label>
                        <select id="placeDenomination" required>
                            <option value="">–ò–∑–±–µ—Ä–∏ –¥–µ–Ω–æ–º–∏–Ω–∞—Ü–∏—è</option>
                            <option value="–ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–∞">–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–∞</option>
                            <option value="–∫–∞—Ç–æ–ª–∏—á–µ—Å–∫–∞">–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–∞</option>
                            <option value="–ø—Ä–æ—Ç–µ—Å—Ç–∞–Ω—Ç—Å–∫–∞">–ü—Ä–æ—Ç–µ—Å—Ç–∞–Ω—Ç—Å–∫–∞</option>
                            <option value="–º—é—Å—é–ª–º–∞–Ω—Å–∫–∞">–ú—é—Å—é–ª–º–∞–Ω—Å–∫–∞</option>
                            <option value="–µ–≤—Ä–µ–π—Å–∫–∞">–ï–≤—Ä–µ–π—Å–∫–∞</option>
                            <option value="–¥—Ä—É–≥–∞">–î—Ä—É–≥–∞</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="placeCity">–ì—Ä–∞–¥*</label>
                        <input type="text" id="placeCity" required>
                    </div>
                    <div class="form-group">
                        <label for="placeWorkingHours">–†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ</label>
                        <input type="text" id="placeWorkingHours" placeholder="–Ω–∞–ø—Ä. 08:00 - 18:00">
                    </div>
                </div>

                <div class="form-group">
                    <label for="placeAddress">–ê–¥—Ä–µ—Å*</label>
                    <input type="text" id="placeAddress" required>
                </div>

                <div class="form-group">
                    <label for="placeDescription">–û–ø–∏—Å–∞–Ω–∏–µ*</label>
                    <textarea id="placeDescription" rows="3" required></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="placeLatitude">–ì–µ–æ–≥—Ä–∞—Ñ—Å–∫–∞ —à–∏—Ä–∏–Ω–∞*</label>
                        <input type="number" id="placeLatitude" step="any" required>
                    </div>
                    <div class="form-group">
                        <label for="placeLongitude">–ì–µ–æ–≥—Ä–∞—Ñ—Å–∫–∞ –¥—ä–ª–∂–∏–Ω–∞*</label>
                        <input type="number" id="placeLongitude" step="any" required>
                    </div>
                </div>

                <button type="button" class="btn-coords btn-small" onclick="showMapModal()">
                    üìç –ò–∑–±–µ—Ä–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –æ—Ç –∫–∞—Ä—Ç–∞
                </button>

                <div class="form-row">
                    <div class="form-group">
                        <label for="placePhone">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" id="placePhone">
                    </div>
                    <div class="form-group">
                        <label for="placeWebsite">–£–µ–±—Å–∞–π—Ç</label>
                        <input type="url" id="placeWebsite">
                    </div>
                </div>

                <div class="action-buttons" style="margin-top: 2rem;">
                    <button type="submit" class="btn-save btn-primary">üíæ –ó–∞–ø–∞–∑–∏</button>
                    <button type="button" class="btn-cancel btn-secondary" onclick="closeModal()">‚ùå –û—Ç–∫–∞–∑</button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª –∑–∞ –∫–∞—Ä—Ç–∞ -->
    <div id="mapPickerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–ò–∑–±–µ—Ä–∏ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞</h2>
                <span class="close" onclick="closeMapModal()">&times;</span>
            </div>
            
            <div class="search-box">
                <input type="text" id="mapSearch" placeholder="–¢—ä—Ä—Å–∏ –∞–¥—Ä–µ—Å –∏–ª–∏ –º—è—Å—Ç–æ..." onkeypress="searchLocation(event)">
            </div>

            <div id="mapModal"></div>
            
            <div class="coordinates-info">
                <strong>–ò–∑–±—Ä–∞–Ω–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏:</strong> 
                <span id="selectedCoords">–ö–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞ –∑–∞ –¥–∞ –∏–∑–±–µ—Ä–µ—Ç–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</span>
            </div>

            <div class="action-buttons">
                <button class="btn-primary" onclick="applyCoordinates()">‚úÖ –ü—Ä–∏–ª–æ–∂–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏</button>
                <button class="btn-secondary" onclick="closeMapModal()">‚ùå –û—Ç–∫–∞–∑</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 –°–≤–µ—Ç–∏ –º–µ—Å—Ç–∞ –≤ –ë—ä–ª–≥–∞—Ä–∏—è. –í—Å–∏—á–∫–∏ –ø—Ä–∞–≤–∞ –∑–∞–ø–∞–∑–µ–Ω–∏.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="../js/data.js"></script>
    <script src="../js/admin.js"></script>
</body>
</html>